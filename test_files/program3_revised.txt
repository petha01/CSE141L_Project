mov r0, -1              // byte_counter
mov r1, 32              // bit_counter
mov r2, 0               // byte_occurrences
mov r3, 0               // total_occurrences
mov r4, 0               // byte_occurrences 

Loop:
mov r7, 31
xor r7, r0
blqz r7, Store

mov r2, 0
mov r7, 1
add r0, r7
ld r1, r0                // r1 = mem[0]

BitLoop:
mov r1, 32              // search_pattern
ld r5, r1     

mov r7, 5
add r2, r7
rsl r5, 
mov r7, 31
and r5, r7       

mov r7, 1
add r2, r7

xor r1, r5               // is it a match??????
blqz r1, Match

mov r7, -3
and r7, r2
blqz r7, Loop

mov r7, 0
blqz r7, BitLoop         // B Loop

Match:
mov r7, 1
add r3, r7

mov r7, 0                
blqz r7, Store           // B Loop

// store
mov r7, 33
mov r1, 1
st r2, r7
add r7, r1
st r3, r7
add r7, r1
st r4, r7